正确的关机方法

在Linux系统中，由于每个程序（或者说是服务）都是在后台执行的，因此，在看不到的屏幕背后其实可能有很多人同时在
你的主机上面工作，例如浏览网页、传送信件以FTP传送文件等，如果直接按下电源开关关机，则其他人的数据可能就此中断。
且有可能造成文件系统的毁损（因为来不及将数据回写到文件中，所以有些服务的文件会有问题）。

关机需要注意的几件事：

1、查看系统的使用情况
  如果要查看目前有谁在线，可以执行“who”这个命令；而如果要看网络的联机状态，可以执行“netstat -a”这个命令；而
  要看后台执行的程序可以执行“ps -aux”这个命令。
  
 2、通知在线用户关机的时刻
  在关机前应当给在线的用户一些时间来结束他们的工作
  
数据同步写入磁盘：sync

在计算机运行的模式中，所有的数据都得要被读入内存后才能被CPU所处理，但是数据又经常需要由内存写回到硬盘中（例如存储）。
由于硬盘的运行速度太慢（相对于内存而言），如果经常让数据在内存与硬盘当中来回写入/读出，系统的性能就不会太好。
因此在Linux系统中，为了加快数据的读取速度，所以在默认的情况下，某些已经加载内存中的数据将不会直接被写回硬盘，而是
先暂存在内存当中，如此一来，如果一个数据被你重复改写，那么由于它尚未被写入硬盘中，因此可以直接由内存中读取出来，在
速度上一定提升很多的。
不过，这样做的问题是，万一系统因为某些特殊的原因造成不正常关机（例如断电），由于数据尚未被写入到硬盘中，所以就会造
成数据的更新不正常。这个时候就需要sync这个命令来进行数据的写入操作。



惯用的关机命令：shutdown

由于Linux的关机时很重要的工作，因此除了是在主机前面以tty7图形界面来登录系统时，不论用什么身份都能够关机之外，若是使
用远程管理工具（如通过pietty使用ssh服务来从其他计算机登录主机），那关机只有root有权限而已。

较常使用的关机命令是shutdown，这个命令会通知系统内的各个进程（progress），并且将通知关闭系统中的run level内的一些服
务。shutdown可完成的的工作如下：
1、可以自由选择关机模式：关机、重启或进入单用户操作模式均可；
2、可以设置关机时间：可以设置成现在立刻关机，也可以设置某一个特定的时间才关机；
3、可以自定义关机消息：在关机之前，可以将自己设置的消息传送给在线用户；
4、可以仅发出警告消息：有时有可能要进行一些测试，而不想让其他用户干扰，或者是明白地告诉用户某段时间要注意一下，这个
时候可以使用shutdown来通知用户，但却不是真的要关机；
5、可以选择是否要用fsck检查文件系统。

shutdown的语法规则：
[root@localhost ~] # /sbin/shutdown [-t 秒] [-arkhncff] 时间 [警告信息]
参数：
-t sec  ：-t 后面加秒数，即“过几秒关机”；
-k      ：不是真的关机，只是发送警告信息出去；
-r      ：在将系统的服务停掉之后就重启（常用）
-h      ：将系统的服务停掉之后，立即关机（常用）
-n      ：不经过init程序，直接以shutdown的功能关机
-f      ：关机并开机之后，强制略过fsck的磁盘检查
-F      ：系统重启之后，强制进行fsck的磁盘检查
-c      ：取消已经在进行的shutdown命令内容
时间    ：这是一定要加入的参数。指定系统关机的时间。



重启、关机：reboot，halt，poweroff


切换执行等级：init
run level 0 ：关机
run level 3 ：纯命令行模式
run level 5 ：含有图形界面模式
run level 6 ：重启





参考资料：鸟哥的Linux私房菜